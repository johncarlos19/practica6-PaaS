<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Jekyll v4.0.1">
    <title>Carrito de Compra en Sesion</title>
    <link rel="icon" href=
            "/img/shopping-bag-2-512.gif"
          type="image/x-icon">
    <!--<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>-->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="../assets/js/vendor/jquery.slim.min.js"><\/script>')</script>
    <script src="bootstrap-4.5.0-dist/js/bootstrap.bundle.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
            integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
            crossorigin="anonymous"></script>
    <link rel="canonical" href="https://getbootstrap.com/docs/4.5/examples/navbar-fixed/">

    <!-- Bootstrap core CSS -->
    <link href="/bootstrap-4.5.0-dist/css/bootstrap.css" rel="stylesheet">

    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }
    </style>
    <!-- Custom styles for this template -->
    <link href="login/signin.css" rel="stylesheet">
    <link href="css/pricing.css" rel="stylesheet">
    <link href="css/navbar-top-fixed.css" rel="stylesheet">

</head>
<body>
<nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
    <a class="navbar-brand" href="#"><img src="img/shopping-bag-2-512.gif" height="32" width="32"> Mercado Rapido</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
            aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <form action="/" method="get" class="nav-item active">
                    <!--<input type="hidden" th:value="Comprar" name="ident">-->
                    <button class="nav-link btn btn-outline-success_es" type="submit">Comprar<span class="sr-only">(current)</span>
                    </button>
                </form>
            </li>
            <li class="nav-item active">
                <form action="/login" method="get" class="nav-item active">
                    <input type="hidden" th:value="venta" name="ident">
                    <button class="nav-link btn btn-outline-success_es" type="submit">Ventas Realizadas<span
                            class="sr-only">(current)</span></button>
                </form>
            </li>
            <li class="nav-item active">
                <form action="/login" method="get" class="nav-item active">
                    <input type="hidden" th:value="administrar" name="ident">
                    <button class="nav-link btn btn-outline-success_es" type="submit">Administrar Productos<span
                            class="sr-only">(current)</span></button>
                </form>
            </li>
        </ul>
        <ul class="navbar-nav  mt-2 mt-md-0 ">
            <li class="nav-item active ">
                <form action="/login" method="get" class="nav-item active">
                    <input type="hidden" th:value="${log}" name="ident">
                    <button class="nav-link btn btn-outline-success_es" type="submit" th:text="${user}">Iniciar
                        seccion<span class="sr-only">(current)</span></button>
                </form>
            </li>

            <li class="nav-item active ">
                <form class="form-inline mt-2 mt-md-0" method="get" action="\carrito" id="carr">
                    <button class="btn btn-outline-success my-2 my-sm-0" type="submit" form="carr">
                        Carrito
                        <svg class="bi bi-cart" width="20" height="20" viewBox="0 0 16 16" fill="currentColor"
                             xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd"
                                  d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm7 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>
                        </svg>
                        <a>(</a><a th:text="${cant}"></a><a>)</a>
                    </button>

                </form>
            </li>
        </ul>


    </div>
</nav>
<main role="main" class="container" style="max-width: 1775px;">
    <div class="" th:style="${compra}">
        <h1 class="text-center">Lista De Productos</h1>

        <div class="card-deck mb-3 text-center justify-content-sm-center" style="text-align: center;">


            <th:block class="justify-content-sm-center" th:each="product : ${listaProducto}" >

                <div class="card mb-4 shadow-sm justify-content-sm-center" th:id="${product.id}+'Producto'"
                     style="max-width: 300px; max-height: 325px; text-align: center; min-width: 300px; ">
                    <div class="card-header justify-content-sm-center">
                        <form method="get" action="/producto">
                        <input type="hidden" name="id" th:value="${product.id}">
                        <button type="submit" class="my-0 font-weight-normal btn " th:text="${product.nombre}">NombreProducto</button></form>
                    </div>
                    <div class="card-body">
                        <div class="container" style="max-width: 300px; height: 175px">

                            <div th:id="'myCarousel'+${product.id}" class="carousel slide" data-ride="carousel">
                                <!-- <ol class="carousel-indicators">

                                     <li th:attr="data-target='#myCarousel'+${product.id}" data-slide-to="0"
                                         class="active"></li>
                                     <li th:attr="data-target='#myCarousel'+${product.id}" data-slide-to="1"></li>
                                     <li th:attr="data-target='#myCarousel'+${product.id}" data-slide-to="2"></li>
                                 </ol>-->

                                <div class="carousel-inner" >
                                    <th:block th:each="picture, iter : ${product.fotos}">

                                        <div class="carousel-item active" th:if="${iter.index == 0}">
                                            <input type="hidden" th:value="${iter.index}">
                                            <img style="width: 250px; height: 100px"
                                                 th:src="@{'data:'+${picture.getMimeType()}+';base64,'+${picture.getFotoBase64()}}"
                                                 class="d-block w-100" alt="..." data-size="300x175">
                                        </div>
                                        <div class="carousel-item" th:unless="${iter.index == 0}">
                                            <input type="hidden" th:value="${iter.index}">
                                            <img style="width: 250px; height: 100px"
                                                 th:src="@{'data:'+${picture.getMimeType()}+';base64,'+${picture.getFotoBase64()}}"
                                                 class="d-block w-100" alt="..." data-size="300x175">
                                        </div>
                                    </th:block>

                                    <!--
                                    <div class="carousel-item">
                                        <img style="width: 250px; height: 100px"
                                             src="https://image.freepik.com/free-photo/wooden-path-inside-forest_78895-1410.jpg"
                                             class="d-block w-100" alt="...">
                                    </div>
                                    <div class="carousel-item">
                                        <img style="width: 250px; height: 100px"
                                             src="https://image.freepik.com/free-photo/dark-blue-glow-dust-particle-abstract-background_35672-1414.jpg"
                                             class="d-block w-100" alt="...">
                                    </div>
                                    -->
                                </div>

                                <a class="carousel-control-prev" style="filter: invert(100%)"
                                   th:href="'#myCarousel'+${product.id}" data-slide="prev">
                                    <span class="carousel-control-prev-icon"></span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="carousel-control-next" style="filter: invert(100%)"
                                   th:href="'#myCarousel'+${product.id}" data-slide="next">
                                    <span class="carousel-control-next-icon"></span>
                                    <span class="sr-only">Next</span>
                                </a>
                            </div>
                        </div>
                    </div>

                    <h1 class="card-title pricing-card-title" style="font-size: 20px;">RD$<a
                            th:text="${product.precio}"></a></h1>
                    <!--<ul class="list-unstyled mt-3 mb-4">
                        <li th:text="${product.descripcion}">Este producto es bueno</li>
                    </ul>-->
                    <table>
                        <tbody>
                        <form method="get" action="/add" th:id="${product.id}">
                            <tr>
                                <td>
                                    <input name="id" type="hidden" th:value="${product.id}">
                                    <input name="cantidad" class="form-control mr-sm-2"
                                           type="number" value="1" min="1" required>
                                </td>
                                <td>
                                    <button class="btn btn-lg btn-block btn-outline-primary" type="submit"
                                            th:form="${product.id}" style="max-height: 38px; font-size:1rem;">Agregar&raquo;
                                    </button>
                                </td>
                            </tr>
                        </form>

                        </tbody>
                    </table>
                </div>
            </th:block>
        </div>


    </div>
    <footer aria-label="Page navigation example">

        <ul class="pagination pagination-sm justify-content-sm-center">
            <th:block th:each="posi : ${#numbers.sequence(1, pagina,1)}">
            <li class="page-item disabled" th:if="${posi == page}">
                <a class="page-link" th:href="'/?page='+${posi}" th:text="${posi}">1</a>
            </li>
                <li class="page-item" th:unless="${posi == page}">
                <a class="page-link" th:href="'/?page='+${posi}" th:text="${posi}">1</a>
                </li>

            </th:block>
        </ul>
    </footer>
</main>
</body>
</html>